<template name="pestsLib">
	
	<div class="text-center">
		<h3> {{getPestLibCMS.searchLabelText}} </h3>
	</div>
	
	{{> searchBar}}

	<div>
		{{#each getPestLibCMS.viewPestType}}
			{{setPageSessions this}}
			<div class="col-sm-12 col-md-12 col-lg-12">
				<h3 class="pest-category-label"> {{this}} Pests </h3>
			</div>

			<div class="container">
				{{#each displayPest this}}
			    	{{> individualPest}}
			    {{/each}}
		    </div>

		    <div class="text-center">
		    	<ul class="pagination">
					{{#each setPagination this}}
				  		<li class="{{#if isCurrentPage num}} active {{/if}}">
				  			<a class="page-number" name="{{getCurrentPestType}}">{{num}}</a>
				  		</li>
					{{/each}}
				</ul>
		    </div>
		{{/each}}
    </div>

</template>

<template name="individualPest">
	<div class="pest-data-body col-sm-4 col-md-3 col-lg-3">
		<div class="panel panel-default">
			<div class="fixed-panel panel-body">
				<div>
					<img src="{{image}}" class="img-thumbnail fixed-image" alt="{{name}}" width="200" height="200"/>
				</div>
				<div>
					<span>{{name}}</span>
			  	</div>
		  	</div>
		  
		  	<div class="panel-footer">
				<a class="view-page" href="/entity/{{_id}}">
					View Page
		 		</a>
		  	</div>
		</div>
	</div>
</template>

<template name="searchBar">
	<center>
		<div class="col-sm-12">
			<div class="searchbar">
		      {{> EasySearch.Input index=pestsIndex placeholder="Search" noDocumentsOnEmpty="true"}}
		    </div>
	    </div>

		<div>
			{{#EasySearch.IfSearching index=pestsIndex}}
			  <div>Searching</div>
			{{/EasySearch.IfSearching}}

	        <div class="container">
				{{#EasySearch.Each index=pestsIndex}}
					{{> individualPest}}
				{{/EasySearch.Each}}
			</div>
		</div>

		{{#EasySearch.IfNoResults index=pestsIndex }}
			<div>No results found!</div>
		{{/EasySearch.IfNoResults}}
	</center>
</template>